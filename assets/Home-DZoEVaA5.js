import{r as i,j as r}from"./index-DX0NVvF3.js";const I=()=>{const[f,b]=i.useState(!1),c=i.useRef(null),m=i.useRef(null),l=i.useRef([]),d=i.useRef(null),p=["Capturamos la esencia de tu amor","Cada mirada, un verso eterno","Tu historia merece ser inmortal","Donde el tiempo se detiene"],[S,j]=i.useState(0),E="img/lazyloadinghome.webp",h="img/arhomevideolowres.mp4",v="img/arhomevideo.mp4",w="img/arhomevideohighres.mp4",[L,g]=i.useState(h);i.useEffect(()=>{const e=setInterval(()=>{j(s=>(s+1)%p.length)},5e3);return()=>clearInterval(e)},[p.length]);const y=e=>new Promise((s,o)=>{const t=document.createElement("video");t.src=e,t.muted=!0,t.playsInline=!0,t.preload="auto";const n=()=>{u(),s(e)},a=C=>{u(),o(C)},u=()=>{t.removeEventListener("loadeddata",n),t.removeEventListener("canplay",n),t.removeEventListener("error",a)};t.addEventListener("loadeddata",n,{once:!0}),t.addEventListener("canplay",n,{once:!0}),t.addEventListener("error",a,{once:!0}),t.load()}),x=async e=>{const s=d.current;if(!s)return;const o=!s.paused,t=s.currentTime||0;g(e),requestAnimationFrame(()=>{const n=d.current;if(!n)return;const a=()=>{n.removeEventListener("loadedmetadata",a),n.removeEventListener("loadeddata",a),n.removeEventListener("canplay",a);try{n.currentTime=t}catch{}o&&n.play().catch(()=>{})};n.addEventListener("loadedmetadata",a,{once:!0}),n.addEventListener("loadeddata",a,{once:!0}),n.addEventListener("canplay",a,{once:!0})})};i.useEffect(()=>{let e=!1;return(async()=>{g(h);const o=d.current;if(!o)return;try{o.load()}catch{}if(await new Promise(n=>{const a=()=>{u(),n()},u=()=>{o.removeEventListener("loadeddata",a),o.removeEventListener("canplay",a)};o.addEventListener("loadeddata",a),o.addEventListener("canplay",a)}),!e){b(!0),o.play().catch(()=>{});try{if(await y(v),e)return;await x(v)}catch{}try{if(await y(w),e)return;await x(w)}catch{}}})(),()=>{e=!0}},[]);const N=()=>{const e=document.getElementById("contacto");e?e.scrollIntoView({behavior:"smooth",block:"start"}):window.location.hash="#contacto"};return i.useEffect(()=>{const e=document.createElement("script");return e.src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js",e.onload=()=>{if(window.gsap){const s=window.gsap.timeline();if(m.current){const t=m.current.querySelectorAll(".word");window.gsap.set(t,{y:60,opacity:0,rotationX:-45}),s.to(t,{y:0,opacity:1,rotationX:0,duration:.8,stagger:.15,ease:"back.out(1.4)"})}if(c.current){const n=(()=>{const a=window.innerWidth;return a>=1024?{width:"100%",height:"100%"}:a>=768?{width:"100%",height:"100%"}:{width:"100%",height:"100%"}})();window.gsap.set(c.current,{width:"18rem",height:"18rem",opacity:0,scale:.9}),s.to(c.current,{opacity:1,scale:1,duration:.6,ease:"power2.out"},.4).to(c.current,{width:n.width,height:n.height,duration:1.2,ease:"power3.inOut"},.7)}const o=[.9,1.1,.5,1.3,1.5,1.7];l.current.forEach((t,n)=>{t&&(window.gsap.set(t,{opacity:0,y:20}),s.to(t,{opacity:1,y:0,duration:.6,ease:"power2.out"},o[n]||1+n*.1))})}},document.head.appendChild(e),()=>{e.parentNode&&e.parentNode.removeChild(e)}},[]),r.jsxs("div",{className:"w-full min-h-screen bg-[#F2F2F2] relative overflow-hidden isolate",children:[r.jsx("div",{ref:e=>l.current[0]=e,className:"absolute top-24 inset-x-0 z-30 flex justify-center",children:r.jsx("div",{className:"text-xs tracking-widest text-white uppercase font-light drop-shadow-lg text-center",children:"CinematografÃ­a Nupcial"})}),r.jsx("div",{className:"absolute left-1/2 z-30 w-screen px-4",style:{top:"calc(80px + (100vh - 80px) / 2)",transform:"translate(-50%, -50%)"},children:r.jsx("div",{ref:e=>l.current[2]=e,className:"w-full flex justify-center",children:r.jsx("button",{type:"button",onClick:N,className:`
              group text-left
              cursor-pointer
              select-none
              focus:outline-none
              focus-visible:ring-2 focus-visible:ring-white/70 focus-visible:ring-offset-2 focus-visible:ring-offset-transparent
            `,"aria-label":"Ir a contacto",children:r.jsxs("h1",{ref:m,className:`
                font-light text-white mb-8 lg:mb-16 text-center leading-[0.9] max-w-[92vw]
                transition-transform duration-300 ease-out
                group-hover:scale-[1.03]
              `,children:[r.jsx("span",{className:"word inline-block text-xl transition-all duration-300 group-hover:tracking-[0.22em]",children:"Presente"}),r.jsx("br",{}),r.jsx("span",{className:"word italic font-serif inline-block transition-transform duration-300 group-hover:scale-[1.02]",style:{fontSize:"clamp(2.5rem, 4vw, 11rem)"},children:"Nuestro"})]})})})}),r.jsx("div",{ref:c,className:"absolute inset-0 w-full h-full overflow-hidden",children:r.jsxs("div",{className:"relative w-full h-full overflow-hidden",children:[!f&&r.jsx("img",{src:E,alt:"Loading...",loading:"eager",decoding:"async",className:"absolute inset-0 w-full h-full object-cover"}),r.jsx("video",{ref:d,src:L,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,preload:"auto",className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 ${f?"opacity-100":"opacity-0"}`}),r.jsx("div",{className:"absolute inset-0 bg-black/30"})]})}),r.jsx("div",{ref:e=>l.current[5]=e,className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 text-xs tracking-widest text-white uppercase font-light z-30",children:"Scroll para descubrir"})]})};export{I as default};
